{% extends '::base.html.twig' %}

{% block javascript %}
<script type="text/javascript">
$(document).ready(function() {
});
</script>
{% endblock %}

{% block body %}
<!-- BEGIN PAGE CONTAINER-->
<div class="container-fluid">
    <!-- BEGIN PAGE HEADER-->
    <div class="row-fluid">
        <div class="span12">    
    
            <h3 class="page-title">
                Number Management 
            </h3>
            <button class="btn green" style="margin-bottom: 4px;"  data-toggle="modal" href="#addNumbers"><i class="icon-plus"></i> Bulk Add Numbers to Pool</button> 
                            
            <br /><br /><br />
            Assign Selected to Account: 
            <select class="small m-wrap" tabindex="1" style="margin-bottom: 4px;">
                <option value="0">-</option>
                {% for acc in accounts %}
                <option value="{{ acc.getID }}">{{ acc.getBusinessName }}</option>
                {% endfor %}
            </select>
            <button class="btn blue" style="margin-bottom: 4px;" ><i class="m-icon-swapright m-icon-white"></i> Assign</button>
            
            <span style="padding-left: 150px;">Filter By Usage:</span> 
            <select id="filter_in_use" class="small m-wrap" tabindex="1">
                <option>-</option>
                <option value="1">In Use</option>
                <option value="0">Not In Use</option>
            </select>

            Filter By Type: 
            <select id="filter_type" class="small m-wrap" tabindex="1">
                <option value="0">-</option>
                <option value="1">Class 1</option>
                <option value="2">Class 2</option>
                <option value="3">Class 3</option>
            </select>       
            <br />

            <!-- Add Number MODAL -->
            <div id="addNumbers" class="modal hide fade" tabindex="-1" data-width="760">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h3>Add Numbers</h3>
                    <ul>
                        <li>Paste the numbers you want to add below</li>
                        <li>Each number should be on a new line</li>
                        <li>Do not enter spaces or + </li>
                        <li>Include the country code</li>
                        <li>e.g. 85266821490</li>
                    </ul>

                </div>
                <form method="post">
                    <div class="modal-body">
                        <div class="row-fluid">
                            <div class="span12">
                                <h4>Number Details</h4>
                                <p>
                                    Numbers *<br />
                                    <textarea name="numbers" class="span12 m-wrap"></textarea>
                                </p>
                                <p>
                                    Number Provider (e.g. CiticTelecom) *<br />
                                    <input name="provider" type="text" class="span12 m-wrap">
                                </p>
                                <p>
                                    Number Type (e.g. Class 1)*<br />
                                    <select name="type">
                                        <option value="1">Class 1</option>
                                        <option value="2">Class 2</option>
                                        <option value="3">Class 3</option>
                                    </select>
                                </p>
                                <p>
                                    Cost Per Number (for us) in USD *<br />
                                    <input name="price_buy" type="text" class="span12 m-wrap">
                                </p>
                                <p>
                                    Resale Price in USD*<br />
                                    <input name="price_resale" type="text" class="span12 m-wrap">
                                </p>
                            </div>
                        </div>
                    </div>
            
                    <div class="modal-footer">
                        <button type="button" data-dismiss="modal" class="btn">Cancel</button>
                        <input type="submit" class="btn green" value="Add numbers" />
                    </div>
                </form>
            </div>                                                          
            <!-- End Add Number MODAL -->
            
            <!-- Edit Number MODAL -->
            <div id="editNumber" class="modal hide fade" tabindex="-1" data-width="760">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h3>Edit Number</h3>


                </div>
                <div class="modal-body">
                    <div class="row-fluid">
                        <div class="span12">
                            <p>Number: 85266821490 </p>
                            <p>Number Provider (e.g. CiticTelecom) *<br /><input type="password" class="span12 m-wrap"></p>
                            <p>Number Type (e.g. Class 1)*<br /><input type="text" class="span12 m-wrap"></p>
                            <p>Cost Per Number (for us) in USD *<br /> <input type="text" class="span12 m-wrap"></p>
                            <p>Resale Price in USD*<br /> <input type="text" class="span12 m-wrap"></p>
                        </div>
                    </div>
                </div>
        
                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="btn">Cancel</button>
                    <button type="button" class="btn green">Save changes</button>
                </div>
            </div>                                                          
            <!-- End Add Number MODAL -->
            
                        <!-- DELETE Number MODAL -->
                        <div id="deleteNumber" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                <h3 id="myModalLabel3">Delete 85266821490?</h3>
                            </div>

                            <div class="modal-footer">
                                <button class="btn pull-left green" data-dismiss="modal" aria-hidden="true">Cancel</button>
                                <button data-dismiss="modal" class="btn red">Delete Number</button>
                            </div>
                        </div>
                        <!-- END Number MODAL -->
            
            <table class="table-bordered table-striped table-condensed cf">
                <thead>
                    <tr>
                        <th style="width:8px;"></th>
                        <th style="width:108px;">Number</th>
                        <th>Type</th>
                        <th>Provider</th>
                        <th>In Use</th>
                        <th>Username</th>
                        <th>Buy Price</th>
                        <th>Resale Price</th>
                        <th style="width:90px;">Date Added to System</th>
                        <th style="width:90px;">Date Added to Account</th>
                        <th>Last Called<br /><small>dd/mm/yy hh:mm</small></th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for num in numbers %}
                    <tr>
                        <td><input type="checkbox" class="checkboxes" value="1" /></td>
                        <td>{{ num.getNumberFormatted }}</td>
                        <td>{{ num.getTypeText }}</td>
                        <td>{{ num.getProvider }}</td>
                        <td>{{ num.isInUse ? 'Yes' : 'No' }}</td>
                        <td>{{ num.getUser ? num.getUser.getUsername : '-' }}</td>
                        <td>{{ num.getPriceBuyFormatted }} USD</td>
                        <td>{{ num.getPriceResaleFormatted }} USD</td>
                        <td>{{ num.getDateCreateFormatted }}</td>
                        <td>{{ num.getDateAssignFormatted }}</td>
                        <td>{{ num.getDateLastCallFormatted }}</td>
                        <td>
                            <button href="#editNumber" data-toggle="modal" role="button" class="btn mini" ><i class="icon-edit"></i> edit</button>
                            <button href="#deleteNumber" data-toggle="modal" role="button" class="btn mini"><i class="icon-trash"></i> delete</button>
                        </td>
                    </tr>
                    {% endfor %}
                    <!--
                    <tr>
                        <td><input type="checkbox" class="checkboxes" value="1" /></td>
                        <td>+852 6682 1001</td>
                        <td>Class 1</td>
                        <td>CiticTelecom</td>
                        <td>No</td>
                        <td>-</td>
                        <td>25 HKD</td>
                        <td>5 USD</td>
                        <td>10 Jun 2013</td>
                        <td>-</td>
                        <td>-</td>
                        <td>
                            <button href="#editNumber" data-toggle="modal" role="button" class="btn mini" ><i class="icon-edit"></i> edit</button>
                            <button href="#deleteNumber" data-toggle="modal" role="button" class="btn mini"><i class="icon-trash"></i> delete</button>
                        </td>
                    </tr>
                    -->
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
